<html>

    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Meteorite Strike Map</title>
    	<link rel="stylesheet" href="css/bootstrap.min.css">
    	<link rel="stylesheet" href="css/animate.css">
    	<script src="js/jquery.min.js"></script>
    	<script src="js/bootstrap.min.js"></script>
    	<script src="js/angular.min.js"></script>    
        <link rel="stylesheet" href="ammap/ammap.css" type="text/css">
        <script src="ammap/ammap.js" type="text/javascript"></script>
		<script src="ammap/maps/js/worldLow.js" type="text/javascript"></script>

		<script>

			$(document).ready(function() {
			    $.ajax({
			        type: "GET",
			        url: "data.csv",
			        dataType: "text",
			        success: function(data) {processData(data);}
			     });
			});

			function processData(allText) {
			    var record_num = 9;  // or however many elements there are in each row
			    var allTextLines = allText.split(/\r\n|\n/);
			    var entries = allTextLines[0].split(',');
			    var lines = [];

			    var headings = entries.splice(0,record_num);
			    while (entries.length>0) {
			        var tarr = [];
			        for (var j=0; j<record_num; j++) {
			            tarr.push(headings[j]+":"+entries.shift());
			        }
			        lines.push(tarr);
			    }
			    alert(lines);
			}


			var map;
			var targetSVG = "M9,0C4.029,0,0,4.029,0,9s4.029,9,9,9s9-4.029,9-9S13.971,0,9,0z M9,15.93 c-3.83,0-6.93-3.1-6.93-6.93S5.17,2.07,9,2.07s6.93,3.1,6.93,6.93S12.83,15.93,9,15.93 M12.5,9c0,1.933-1.567,3.5-3.5,3.5S5.5,10.933,5.5,9S7.067,5.5,9,5.5 S12.5,7.067,12.5,9z";

			AmCharts.ready(function() {
			    map = new AmCharts.AmMap();
			    var dataProvider = {
			        mapVar: AmCharts.maps.worldLow
			    };
			    map.areasSettings = {
			        unlistedAreasColor: "gray"
			    };

			    map.linesSettings = {
			        color: "black",
			        alpha: 0.4
			    };

			    var b1000 = 	"red";
			    var b5000 = 	"red";
			    var b25000 = 	"red";
			    var b50000 = 	"red";
			    var b100000 = 	"red";
			    var b500000 = 	"red";
			    var b5000000 = 	"red";
			    var bi = 		"red";


			    var strikes = [
			    {
			        svgPath: targetSVG,
			        title: "Hey",
			        latitude: 50.8371,
			        longitude: 4.3676,
			        color: "black",
			        rollOverColor: "red",
			    },
			    // {
			    //     svgPath: targetSVG,
			    //     title: "Prague",
			    //     latitude: 50.0878,
			    //     longitude: 14.4205},
			    // {
			    //     svgPath: targetSVG,
			    //     title: "Athens",
			    //     latitude: 37.9792,
			    //     longitude: 23.7166},
			    // {
			    //     svgPath: targetSVG,
			    //     title: "Reykjavik",
			    //     latitude: 64.1353,
			    //     longitude: -21.8952},
			    // {
			    //     svgPath: targetSVG,
			    //     title: "Dublin",
			    //     latitude: 53.3441,
			    //     longitude: -6.2675},
			    // {
			    //     svgPath: targetSVG,
			    //     title: "Oslo",
			    //     latitude: 59.9138,
			    //     longitude: 10.7387},
			    // {
			    //     svgPath: targetSVG,
			    //     title: "Lisbon",
			    //     latitude: 38.7072,
			    //     longitude: -9.1355},
			    // {
			    //     svgPath: targetSVG,
			    //     title: "Moscow",
			    //     latitude: 55.7558,
			    //     longitude: 37.6176},
			    // {
			    //     svgPath: targetSVG,
			    //     title: "Belgrade",
			    //     latitude: 44.8048,
			    //     longitude: 20.4781},
			    // {
			    //     svgPath: targetSVG,
			    //     title: "Bratislava",
			    //     latitude: 48.2116,
			    //     longitude: 17.1547},
			    // {
			    //     svgPath: targetSVG,
			    //     title: "Ljubljana",
			    //     latitude: 46.0514,
			    //     longitude: 14.5060},
			    // {
			    //     svgPath: targetSVG,
			    //     title: "Madrid",
			    //     latitude: 40.4167,
			    //     longitude: -3.7033},
			    // {
			    //     svgPath: targetSVG,
			    //     title: "Stockholm",
			    //     latitude: 59.3328,
			    //     longitude: 18.0645},
			    // {
			    //     svgPath: targetSVG,
			    //     title: "Bern",
			    //     latitude: 46.9480,
			    //     longitude: 7.4481},
			    // {
			    //     svgPath: targetSVG,
			    //     title: "Kiev",
			    //     latitude: 50.4422,
			    //     longitude: 30.5367},
			    // {
			    //     svgPath: targetSVG,
			    //     title: "Paris",
			    //     latitude: 48.8567,
			    //     longitude: 2.3510},
			    // {
			    //     svgPath: targetSVG,
			    //     title: "New York",
			    //     latitude: 40.43,
			    //     longitude: -74}
			    ];

			    dataProvider.images = strikes;
			    map.dataProvider = dataProvider;
			    map.write("mapdiv");

			});

        </script>
    </head>

    <body>
        <div id="mapdiv" style="width: 100%; background-color:#b1c8ed; height: 700px;"></div>
    </body>

</html>